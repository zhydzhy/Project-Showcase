<html>
  <head>
    <meta charset="utf-8" />

    <script src="lib/bindings/utils.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js"
    ></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
      html,
      body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #222;
      }

      .card {
        height: 100%;
        width: 100%;
        border-radius: 0;
      }

      #mynetwork {
        width: 100%;
        height: 100%;
        background-color: #222222;
        border: none;
        position: relative;
      }

      /* Fullscreen button */
      #fullscreenBtn {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 10;
      }
    </style>
  </head>

  <body>
    <div class="card">

      <!-- Fullscreen button -->
      <button id="fullscreenBtn" class="btn btn-light btn-sm">
        â›¶ Fullscreen
      </button>

      <div id="mynetwork" class="card-body"></div>
    </div>

    <script>
      /* ---------- FULLSCREEN HANDLER ---------- */
      const fsButton = document.getElementById("fullscreenBtn");
      const graphContainer = document.getElementById("mynetwork");

      fsButton.addEventListener("click", () => {
        if (!document.fullscreenElement) {
          graphContainer.requestFullscreen().catch(err => {
            console.error(`Fullscreen error: ${err.message}`);
          });
        } else {
          document.exitFullscreen();
        }
      });

      /* ---------- DRAW GRAPH (your original code) ---------- */

      var edges;
      var nodes;
      var allNodes;
      var allEdges;
      var nodeColors;
      var network;

      function drawGraph() {
        var container = document.getElementById("mynetwork");

        nodes = new vis.DataSet([
          { color: "#97c2fc", font: { color: "white" }, id: 0, label: "sceneContent", shape: "ellipse" },
          { color: "#FF6D1F", font: { color: "white" }, id: 1, label: "Entity", shape: "box" },
          { color: "#97c2fc", font: { color: "white" }, id: 2, label: "occlusionEvent_01", shape: "ellipse" },
          { color: "#FF6D1F", font: { color: "white" }, id: 3, label: "imageBoundary", shape: "box" },
          { color: "#97c2fc", font: { color: "white" }, id: 4, label: "vehicleA", shape: "ellipse" },
          { color: "#FF6D1F", font: { color: "white" }, id: 5, label: "Agent", shape: "box" },
          { color: "#97c2fc", font: { color: "white" }, id: 6, label: "observation_02", shape: "ellipse" },
          { color: "#FF6D1F", font: { color: "white" }, id: 7, label: "cameraFeed_01", shape: "box" },
          { color: "#97c2fc", font: { color: "white" }, id: 8, label: "vehicleA_obs_activity_1", shape: "ellipse" },
          { color: "#97c2fc", font: { color: "white" }, id: 9, label: "observation_01", shape: "ellipse" },
          { color: "#FF6D1F", font: { color: "white" }, id: 10, label: "Activity", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 11, label: "Observation", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 12, label: "Vehicle", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 13, label: "0.9", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 14, label: "OcclusionEvent", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 15, label: "0.95", shape: "box" },
          { color: "#FF6D1F", font: { color: "white" }, id: 16, label: "CameraFeed", shape: "box" }
        ]);

        edges = new vis.DataSet([
          { color: "white", from: 0, label: "type", to: 1 },
          { color: "white", from: 2, label: "hasOccluder", to: 3 },
          { color: "white", from: 4, label: "type", to: 5 },
          { color: "white", from: 6, label: "hasSensorEvidence", to: 7 },
          { color: "white", from: 8, label: "wasAssociatedWith", to: 4 },
          { color: "white", from: 9, label: "hasSensorEvidence", to: 7 },
          { color: "white", from: 6, label: "hasTriggerEvent", to: 2 },
          { color: "white", from: 8, label: "type", to: 10 },
          { color: "white", from: 9, label: "type", to: 11 },
          { color: "white", from: 3, label: "type", to: 1 },
          { color: "white", from: 4, label: "type", to: 12 },
          { color: "white", from: 6, label: "hasConfidenceScore", to: 13 },
          { color: "white", from: 9, label: "wasGeneratedBy", to: 8 },
          { color: "white", from: 6, label: "type", to: 11 },
          { color: "white", from: 2, label: "type", to: 14 },
          { color: "white", from: 2, label: "hasOccludedEntity", to: 0 },
          { color: "white", from: 9, label: "hasConfidenceScore", to: 15 },
          { color: "white", from: 7, label: "type", to: 16 },
          { color: "white", from: 6, label: "wasGeneratedBy", to: 8 }
        ]);

        data = { nodes: nodes, edges: edges };

        var options = { physics: { enabled: true, stabilization: { iterations: 100 } } };

        network = new vis.Network(container, data, options);
      }

      drawGraph();
    </script>
  </body>
</html>
